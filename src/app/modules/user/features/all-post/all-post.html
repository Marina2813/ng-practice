  <app-navbar></app-navbar>

<section class="all-posts-section py-5 text-light" style="background-color: #111;">
  
  <div class="position-absolute top-0 start-0 w-100 h-100" style="
    background-image: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%224%22 height=%224%22><rect width=%222%22 height=%222%22 fill=%22%23ffffff%22 fill-opacity=%220.03%22/></svg>');
    background-repeat: repeat;
    z-index: 0;
    opacity: 1;
    pointer-events: none;
  ">
  </div>


  
  <div class="container position-relative z-1">
    <div class="section-heading text-center mb-5">
        <h2 class="display-4 fw-bold">
            <span class="highlight-word">Explore</span> Our Latest Posts
        </h2>
        <p class="section-subtext mt-2">
            Discover insights, stories, and tips from our community
        </p>
    </div>



    <div *ngIf="loading" class="text-center text-secondary">Loading posts...</div>
    <div *ngIf="error" class="text-danger text-center">{{ error }}</div>

    <div *ngIf="!loading && pagedPosts.length > 0" class="row g-4">
      <div *ngFor="let post of pagedPosts" class="col-md-6 col-lg-4">
        <a [routerLink]="['/posts', post.postId]"  class="text-decoration-none">
          <div class="card glass-card h-100 border-0 shadow-lg text-white">
            <img src="/post2.png" class="card-img-top" alt="Post Image" style="height: 180px; object-fit: cover; border-radius: 0.5rem 0.5rem 0 0;">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ post.title }}</h5>
              <p class="card-text text-light-50 small">
                {{ getTagline(post.content.split('.')[0] || 'No description available.') }}

              </p> 
              <div class="mt-auto">
                <div class="d-flex flex-wrap justify-content-between text-light-50 small mt-3">
                  <span>👤 {{ post.username || 'Unknown' }}</span>
                  <span>📅 {{ post.createdDate | date:'mediumDate' }}</span>
                  <span>💬 {{ post.commentCount || 0 }}</span>
                  <span>👏 {{ post.likeCount || 0 }}</span>
                </div>
              </div> 
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>

  <div class="text-center mt-4">
  <button class="btn btn-outline-light mx-1"
          [disabled]="currentPage === 1"
          (click)="setPage(currentPage - 1)">
    ‹ Prev
  </button>

 <ng-container *ngFor="let page of pages">
  <button class="btn"
          [ngClass]="{ 'btn-light': currentPage === page, 'btn-outline-light': currentPage !== page }"
          (click)="setPage(page)">
    {{ page }}
  </button>
</ng-container>

  <button class="btn btn-outline-light mx-1"
          [disabled]="currentPage === totalPages"
          (click)="setPage(currentPage + 1)">
    Next ›
  </button>
</div>

</section>
